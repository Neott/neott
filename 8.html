<!DOCTYPE HTML>
<html lang="zh-cmn-Hans">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="google" value="notranslate" />
    <title>Hexo的备份和恢复 | 乱码周刊</title>
    <link rel='shortcut icon' href='/favicon.ico' type='image/x-icon' />
    <link rel='stylesheet' href='/style.css' media='screen' type='text/css'>
    <script type="text/javascript">
        if(/AppleWebKit.*Mobile/i.test(navigator.userAgent) || (/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent))){ 
        if(window.location.href.indexOf("?mobile")<0){ 
            document.write("<style type='text/css' media='screen'>.content{width:100%}</style>");
            document.write("<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0' name='viewport' />");
        }}
    </script> 
</head>
<body>
<div id="Top"><div class="content">
    <div class="home"><a href="/">[乱码周刊]</a></div>
    <div class="topr"><a href="/">首页</a></li><a href="/mark/">标记</a></li><a href="/archives/">存档</a></li><a href="/about/">关于</a></li></div>
</div></div>
<div id="Wrapper">
    <div class="content main">

    <div class="menu  button">
        <a href="/">网站首页</a>
        <span class="arrow">&rsaquo;</span>
        
    
    <a href="/categories/code/">代码笔记</a>

        
    <span class="arrow">&rsaquo;</span>
    
    <a href="/tags/Hexo/">Hexo</a>

        
    
          <h1>Hexo的备份和恢复</h1>
    

        <span class="date">2015-01-03</span>
    </div>
    <div class="post"><p>在2015年的第一天，我寻思给电脑也清理一下过个元旦吧，然后就手欠把主板CPU针脚干断两根，推到一片，主板送修后把硬盘接到了家用的另外一台电脑，恰遇如何备份和恢复Hexo的问题，这里便记录一下这个情况，高手可以直接无视。</p>
<h3 id="备份Hexo的两种方式">备份Hexo的两种方式</h3>
<p>第一种方式比较简单，直接把Hexo的文件夹放进Dropbox或其他同步盘里，在重装系统或另外一台电脑同步下来就行了。</p>
<p>第二种方式是备份到Github，这就需要费点周折了，不过这也是学习Git命令的好机会。首先需要在GitHub建立一个新的仓库，如Hexo。在本地的Hexo文件夹里执行Git命令：</p>
<figure class="highlight"><pre><div class="line">$ git init <span class="comment"> //初始化仓库</span></div><div class="line">$ git remote <span class="built_in">add</span> origin <span class="keyword">https</span>://github.com/jack/hexo.git <span class="comment"> //关联远程仓库</span></div><div class="line">$ git <span class="built_in">add</span> . <span class="comment"> //添加所有文件到缓存</span></div><div class="line">$ git commit -m <span class="string">"add all file"</span><span class="comment"> //提交"说明"</span></div><div class="line">$ git push -u origin master <span class="comment"> //第一次推送到远端仓库</span></div></pre></figure>

<p>这是第一次备份整个Hexo文件夹到GitHub的命令集合（根目录下有个.gitignore文件，里面每行的文件或文件夹都是不会提交到Git的，这里推荐把node_modules文件夹去掉，这里是Hexo的依赖库），由于我们经常写文章，同样需要把新写的文章备份进去，当然，还有Hexo的主题改动。以后有改动或更新再次备份的时候，就会简单一些:</p>
<figure class="highlight"><pre><div class="line"><span class="variable">$ </span>git add .</div><div class="line"><span class="variable">$ </span>git commit -m <span class="string">"add new post"</span></div><div class="line"><span class="variable">$ </span>git push origin master	/<span class="regexp">/第一次后每次推送修改到远端仓库master分支</span></div></pre></figure>

<p>到这里，整个Hexo算是备份到GitHub了，一般只是用来添加新文章和文章改动，如果需要更多的功能，建议查阅一下这两个Git文档:<a href="http://gitref.org/zh/index.html" target="_blank" rel="external">Git 参考手册</a>和<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">廖雪峰的Git教程</a>。</p>
<h3 id="恢复Hexo">恢复Hexo</h3>
<p>第一种备份方式直接同步下来就可以了，而第二种则需要先安装必要的环境<a href="http://msysgit.github.io/" target="_blank" rel="external">Git</a>和<a href="http://nodejs.org/" target="_blank" rel="external">Node.js</a>和SSH Key，参见前一篇小文<a href="/7.html">快速开始Hexo的正确姿势</a>，顺便先设置用户信息、安装Hexo：</p>
<figure class="highlight"><pre><div class="line">$ git config --<span class="keyword">global</span> user.name <span class="string">"jack"</span><span class="comment">//用户名</span></div><div class="line">$ git config --<span class="keyword">global</span> user.email  <span class="string">"jack@gmail.com"</span><span class="comment">//你的邮箱</span></div><div class="line">$ npm install -g hexo</div></pre></figure>

<p>然后只需一条命令即可从GitHub克隆回来：</p>
<figure class="highlight"><pre><div class="line">$ git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/jack/hexo.git</div></pre></figure>

<p>这时候你的Hexo已经满血复活了，又可以快乐的Hexo了。</p>
</div>
</div>
</div>
<div id="Bottom"><div class="content">
    <div class="inner">&copy; 2015 NAOG<b class="snow">·</b>
        <a href="http://hexo.io/" target="_blank">HEXO</a><b class="snow">·</b>
        <a href="https://github.com/" target="_blank">GITHUB</a><b class="snow">·</b>
        <a href="https://gitcafe.com/" target="_blank">GITCAFE</a><b class="snow">·</b>
        <a href="https://www.v2ex.com/" target="_blank">V2EX</a>
    </div>
    <span class="backtop"><a href="javascript:scroll(0,0)">回 到 顶 部</a></span>
</div></div>
</body>
</html>